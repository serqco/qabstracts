SugarC: Scalable Desugaring of Real-World Preprocessor Usage into Pure C.

 2022 IEEE/ACM 44th International Conference on Software Engineering (ICSE)
4VHBS$ 4DBMBCMF %FTVHBSJOH PG 3FBM8PSME 1SFQSPDFTTPS 6TBHF
JOUP 1VSF $
;BDIBSZ 1B‡•íFSTPO
‡•üF 6OJWFSTJUZ PG 5FYBT BU %BMMBT
64"
;BDI1BUUFSTPO!VUEBMMBTFEV
                     4IJZJ 8FJ
     ‡•üF 6OJWFSTJUZ PG 5FYBT BU %BMMBT
                  64"
          TXFJ!VUEBMMBTFEV
"#453"$5
7BSJBCJMJUZBXBSF BOBMZTJT JT DSJUJDBM GPS FOTVSJOH UIF RVBMJUZ PG DPO
‡©óHVSBCMF $ TP‡•èXBSF "O JNQPSUBOU TUFQ UPXBSE UIF EFWFMPQNFOU PG
WBSJBCJMJUZBXBSF BOBMZTJT BU TDBMF JT UP USBOTGPSN SFBMXPSME $ TP‡•è
XBSF UIBU VTFT CPUI $ BOE QSFQSPDFTTPS JOUP QVSF $ DPEF CZ SFQMBD
JOH UIF QSFQSPDFTTPS‚Ä´€ù‚Ä¨T DPNQJMFUJNF WBSJBCJMJUZ XJUI $‚Ä´€ù‚Ä¨T SVOUJNF
WBSJBCJMJUZ *O UIJT XPSL XF EFTJHO BOE JNQMFNFOU B EFTVHBSJOH
UPPM 4VHBS$ UIBU USBOTGPSNT BXBZ SFBMXPSME QSFQSPDFTTPS VTBHF
4VHBS$ BVHNFOUT $‚Ä´€ù‚Ä¨T GPSNBM HSBNNBS TQFDJ‡©óDBUJPO XJUI USBOTMB
UJPO SVMFT QFSGPSNT TJNVMUBOFPVT UZQF DIFDLJOH EVSJOH EFTVHBS
JOH BOE JOUSPEVDFT OVNFSPVT PQUJNJ[BUJPOT UP BEESFTT DIBMMFOHFT
UIBU BQQFBS JO SFBMXPSME QSFQSPDFTTPS VTBHF ‡•üF FYQFSJNFOUT PO
%FTVHBS#FODI B CFODINBSL DPOTJTUJOH PG  NBOVBMMZDSFBUFE
QSPHSBNT TIPX UIBU 4VHBS$ TVQQPSUT NBOZ NPSF MBOHVBHF GFB
UVSFT UIBO UXP FYJTUJOH EFTVHBSJOH UPPMT 8IFO BQQMJFE PO UISFF
SFBMXPSME DPO‡©óHVSBCMF $ TP‡•èXBSF 4VHBS$ EFTVHBSFE  PVU PG
 ‡©óMFT JO UIF UISFF QSPHSBNT UBLJOH BU NPTU UFO NJOVUFT JO UIF
XPSTU DBTF BOE MFTT UIBO UXP NJOVUFT GPS  PG UIF $ ‡©óMFT
$$4 $0/$&154
‚Ä´ €¶‚Ä¨4P‡¢ÑXBSF BOE JUT FOHJOFFSJOH ‚Üí 1SFQSPDFTTPST 4PVSDF DPEF
HFOFSBUJPO 4P‡°ÑXBSF QSPEVDU MJOFT
,&:803%4
$ QSFQSPDFTTPS TZOUBYEJSFDUFE USBOTMBUJPO EFTVHBSJOH
"$.
{{}}
3FGFSFODF 'PSNBU
;BDIBSZ 1B‡•íFSTPO ;FOPOH ;IBOH #SFOU 1BQQBT 4IJZJ 8FJ BOE 1BVM (B[[
JMMP  4VHBS$ 4DBMBCMF %FTVHBSJOH PG 3FBM8PSME 1SFQSPDFTTPS 6TBHF
JOUP 1VSF $ *O UI *OUFSOBUJPOBM $POGFSFODF PO 4P‡°ÑXBSF &OHJOFFSJOH *$4&
‚Ä´ ⁄£‚Ä¨.BZ ‚Ä´  ⁄ù‚Ä¨1J‡°áTCVSHI 1" 64" "$.
{{}}
/FX :PSL /:
{{}}
64"  QBHFT
IUUQTEPJPSH
1FSNJTTJPO UP NBLF EJHJUBM PS IBSE DPQJFT PG BMM PS QBSU PG UIJT XPSL GPS QFSTPOBM PS
DMBTTSPPN VTF JT HSBOUFE XJUIPVU GFF QSPWJEFE UIBU DPQJFT BSF OPU NBEF PS EJTUSJCVUFE
GPS QSP‡©óU PS DPNNFSDJBM BEWBOUBHF BOE UIBU DPQJFT CFBS UIJT OPUJDF BOE UIF GVMM DJUB
UJPO PO UIF ‡©óSTU QBHF $PQZSJHIUT GPS DPNQPOFOUT PG UIJT XPSL PXOFE CZ PUIFST UIBO
"$.
{{}}
NVTU CF IPOPSFE "CTUSBDUJOH XJUI DSFEJU JT QFSNJ‡•íFE 5P DPQZ PUIFSXJTF PS SF
QVCMJTI UP QPTU PO TFSWFST PS UP SFEJTUSJCVUF UP MJTUT SFRVJSFT QSJPS TQFDJ‡©óD QFSNJTTJPO
BOEPS B GFF 3FRVFTU QFSNJTTJPOT GSPN QFSNJTTJPOT!BDNPSH
*$4& ‚Ä´ ⁄£‚Ä¨.BZ ‚Ä´  ⁄ù‚Ä¨1J‡°áTCVSHI 1" 64"
i  "TTPDJBUJPO GPS $PNQVUJOH .BDIJOFSZ
"$.
{{}}
*4#/ €™
IUUQTEPJPSH
{{}}
---
